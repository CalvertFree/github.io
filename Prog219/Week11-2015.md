## Description

Thoughts and hints during finals week.

Please note that next school year I should be teaching:

- ISIT320 in the fall
- ISIT322 in Winter
- Prog270 in Winter
- Prog272 in Spring
- Prog219 in Spring

Anyone who got through this course is welcome in both 320 and 322. Those are sophmore year courses and are part of the four year program. Having made it through this course should make 270 relatively simple for you, and Prog272 should be interesting but also a comfortable fit. 

In general, a lot of the same subjects we are covering here will be in all or most of those courses:

- Cloud, Git, AWS
- HTML, CSS, JavaScript
- Express, Angular
- NOSQL with either MongoDb or CouchDb
- Maybe a little Python in 320 and 322. We also did a lot of ThreeJS in 320 last year, but I'm not sure we will head that way this time around. 

## Angular verison

Don't mix your versions of angular in bower.json

Wrong:

```
 "dependencies": {
    "angular": "~1.3.15",
    "angular-mocks": "~1.3.15",
    "angular-resource": "~1.4.0",
    "angular-route": "~1.4.0"
  }
```

Right:

```
 "dependencies": {
    "angular": "~1.4.0",
    "angular-mocks": "~1.4.0",
    "angular-resource": "~1.4.0",
    "angular-route": "~1.4.0"
  }
```

## Jasmine Version

Make sure you are using the correct version of Jasmine.

Wrong:

```javascript
{
 "name": "testlive",
 "version": "0.0.0",
 "dependencies": {
     "jasmine": "~1.3.1"
 },
 "devDependencies": {}
}
```

It should be a later version, like this:

```javascript
{
 "name": "testlive",
 "version": "0.0.0",
 "dependencies": {
   "jasmine": "~2.3.4"
 },
 "devDependencies": {}
}
```

Make sure you are loading all the jasmine files, including **boot.js**:

```HTML
<script src="bower_components/jasmine/lib/jasmine-core/jasmine.js"></script>
<script src="bower_components/jasmine/lib/jasmine-core/jasmine-html.js"></script>
<script src="bower_components/jasmine/lib/jasmine-core/boot.js"></script>
```

For instance, here is a sample **test/index.html** file:

```html
<!doctype html>
<html>
    <head>
        <title>Jasmine Spec Runner</title>
        <link rel="stylesheet" href="bower_components/jasmine/lib/jasmine-core/jasmine.css">
    </head>
    <body>
        <script src="bower_components/jasmine/lib/jasmine-core/jasmine.js"></script>
        <script src="bower_components/jasmine/lib/jasmine-core/jasmine-html.js"></script>
        <script src="bower_components/jasmine/lib/jasmine-core/boot.js"></script>

        <!-- include source files here... -->
        <!-- script src="../public/components/jquery/dist/jquery.js"></script -->
        <script src="../public/components/angular/angular.js"></script>
        <script src="../public/components/angular-mocks/angular-mocks.js"></script>
        <script src="../public/components/angular-route/angular-route.js"></script>
        <!-- include spec files here... -->
        <script src="../public/javascripts/ScienceFacade.js"></script>
        <script src="../public/javascripts/SimpleScienceData.js"></script>
        <script src="../public/javascripts/Control.js"></script>
        <script src="spec/test.js"></script>
        <script src="spec/TestScienceFacade.js"></script>
    </body>
</html>
```


## Routes

You will need at least two middleware routing files on the server side to get the basic functionality up and running. You will need three if you want to properly handle **comments**.

Here are the files:

- **routes/index**: Use this file to handle requests for **main.jade**, **about.jade** and similar files.
- **routes/documents**: Use this or file with a similar name to handle requests for your topics documents. In the sample program, these documents have names like **physics.jade**, **astronomy.jade**, etc.
- **routes/comments**: Use this file for requests related to comments.

In **index.js** the code that handles requests for comments looks like this in my version of the final:

```javascript
router.get('/:id', function(request, response) {
	console.log(request.params.id);
	response.render(request.params.id, {});
});
```

In **documents.js**, the entire file looks like this in my version of final:

```javascript
var express = require('express');
var router = express.Router();

/* GET home page. */

router.get('/:id', function(req, res, next) {
  console.log('ScienceInfo', req.params.id);
  res.render('ScienceInfo/' + req.params.id, { title: 'Astronomy' });
});

module.exports = router;
```

The contents of my **routes/comments.js** file is discussed [elsewhere][comroute].

[comroute]:http://www.ccalvert.net/books/CloudNotes/Assignments/MongooseComments.html#step-three

## Upstart

Make sure upstart is running on EC2

## Menus

## SignIn

## Comments 


## Handling Missing Documents

We should have a default document that is loaded if the document requested is not found. If not that, then at least load in a message rather than popping up an alert.

## The GetMarie Button

Make sure you are searching for a string and a field that exists in your database. For instance, I have someone with a firstName of **Marie** in my database, hence the following code works for me:

```javascript

myController.getMarie = function() {
    var maries = myController.scientists[0].getTopic("Marie", function(maries) {
        myController.marie = maries[0];
    });
};
```

But if you have no one with a first name of Marie, then that won't work. 

Also, in your equivalent of **public/javascripts/ScienceResource**, make sure you search on a field that exists in your database. For instance, I have a field called **firstName** so this code works:

```javascript
scientists.prototype.getTopic = function(firstNameToFind, callback) {
    bar = $resource(
        'https://api.mongolab.com/api/1/databases/' + CONFIG.DB_NAME +
        '/collections/' + CONFIG.COLLECTION, {
            apiKey: CONFIG.API_KEY,
            q: {"firstName": firstNameToFind }
        });
    return bar.query({}, callback);
};
``` 

However, if you have a **gadgetName** property but no **firstName** property, then you should write this:

```javascript
scientists.prototype.getTopic = function(gadgetNameToFind, callback) {
    bar = $resource(
        'https://api.mongolab.com/api/1/databases/' + CONFIG.DB_NAME +
        '/collections/' + CONFIG.COLLECTION, {
            apiKey: CONFIG.API_KEY,
            q: {"gadgetName": gadgetNameToFind }
        });
    return bar.query({}, callback);
};
``` 
