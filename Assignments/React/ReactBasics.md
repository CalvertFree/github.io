# React Basics

Copyright (c) 2017 by Charlie Calvert

This chapter helps you get started with React.

Here are some useful links:

- [Slides](http://bit.ly/react-basics)
- [github student](https://education.github.com/pack)

## NPM Init

Run these commands and fill in the prompts as shown below but with your own details where appropriate:

```
mkdir ~/Source   // If this command fails, its okay.
cd ~/Source
mkdir Week01-ReactBasics && cd Week01-ReactBasics
npm init
```

When prompted for input after running **npm init**, you could respond like this:

```
name: react-basics
version: (1.0.0)
description: react basics examples
entry point: (index.js) server.js
test command:
git repository: https://github.com/charliecalvert/JsObjects.git
keywords: react
author: Charlie Calvert
license: (ISC) MIT
```

## Create

Run these commands:

```bash
npm install --save react react-dom webpack
npm install --save-dev babel-loader babel-core webpack-dev-server
npm install --save-dev babel-preset-react babel-preset-es2015
```

Add edit the scripts section of **package.json** to look like this:

```javascript
"scripts": {
   "start": "node_modules/.bin/webpack-dev-server",
   "test": "echo \"Error: no test specified\" && exit 1",
   "build": "node_modules/.bin/webpack"
},
```

## JSX

JSX allows you to write an HTML like syntax in JavaScript. It is a separate project from React, but is closely linked to it.

- [JSX Home Page](http://facebook.github.io/jsx/)

```javascript
import React from 'react';

export class ReactBasics extends React.Component {
   render() {
       return <h1>An H1 element in a React Component</h1>
   }
}
```

## Import and Export

By default, each file in a React project is in its own module and is entirely invisible to all other objects. It leaks nothing.

If you want to make part of a file visible to one other file, then export the part you want to make visible and import it in another file.

```javascript
export class ReactBasics extends React.Component {}
```

## Render HTML with JSX Code

JSX produces JavaScript, and the JavaScript renders the HTML. This example is pure JavaScript:

```javascript
React.DOM.h1(
  {id: "elf-heading"},
  React.DOM.span(null, "Elven"),
  " DOM"
),
```

The code shown below produces the same HTML as that shown above, only this code contains JSX:

```javascript
ReactDOM.render(
  <h1 id="elf-heading">
    <span>Elven</span> DOM
  </h1>,
  document.getElementById("root")
);
```

The first example shown in this section displays what JSX produces. It is also an example of how to use the React API to compose HTML with JavaScript

## HTML File

We create an HTML file called **index.html**. Here is **index.html**:

```html
<!doctype html>
<html>
 <head>
   <meta charset="UTF-8">
   <title>React Basics</title>
 </head>
 <body>
   <div id="root"></div>
   <script src="bundle.js"></script>
 </body>
</html>
```

Our HTML has a **DIV** element with an **ID** of **root**. It also loads a file called **bundle.js**, which will be autogenerated from our JavaScript and CSS sources. The **bundle.js** JavaScript file contains all the code for our project, including the CSS. It is created from our source files by a utility called webpack. I explain how to create it later in this chapter.

## The main File

Here is how we link the **ReactBasics.js** page from the previous sections into a file called **main.js**. We then display **ReactBasics** on our HTML form by attaching it to the **DIV** element with an **ID** of root.

```javascript
import React from 'react';
import ReactDOM from 'react-dom';
import { ReactBasics } from './ReactBasics.js';

ReactDOM.render(
  <ReactBasics/>,
  document.getElementById('root')
);
```

## Transpiling with Webpack

We write some of our code using ES6 and JSX syntax. JSX and ES6 won't run in many browsers. We use Babel to convert ES6 and JSX code to ES5 code.

We use webpack to help us bundle it into a single file or small set of files. This is called transpiling. We transpile our JSX and ES6 code into ES5 code.

On the next section, you will see a webpack configuration file

## Webpack Configuration

Save the following code in: webpack.config.js. Note that entry is main.js and output is bundle.js.

```javascript
var path = require('path');
var webpack = require('webpack');

module.exports = {
   entry: './main.js',
   output: {path: __dirname, filename: 'bundle.js'},
   module: {
       loaders: [
           {
               test: /.js?$/,
               loader: 'babel-loader',
               exclude: /node_modules/,
               query: {presets: ['es2015', 'react']}
           }
       ]
   },
};
```

## Run Your Code

Optionally issue this command at the command prompt to check your work:

  node_modules/.bin/webpack

That should be the same as npm run build

Launch the web server, which also runs the webpack command shown above:

  node_modules/.bin/webpack-dev-server

Browse to:

http://localhost:8080/

**NOTE**: _You can append the webback-dev-server line above to your build script in package.json. Use &&: command1 && command2._

## Stateless Functions

Stateless functions can provide the same functionality as above, but with very clean, sparse, syntax.

Create a new file called **ReactBasicsStatelessFunctional.js** and insert into it the code the shown below.

```javascript
import React from 'react';

export const ReactBasics = () => (
   <h1>An H1 element in a React Stateless Function</h1>
);
```

Compare this code to the code in **ReactBasics.js**.

These are two ways of saying the same thing. Pick the way that you prefer.

## Link in Stateless Code

Modify **main.js** by removing the reference to **ReactBasics.js** and replacing it with a reference to **ReactBasicsStatelessFunctional.js**.

```javascript
import React from 'react';
import ReactDOM from 'react-dom';
import { ReactBasics } from './ReactBasicsStatelessFunctional.js';

ReactDOM.render(<ReactBasics/>, document.getElementById('root'));
```

Now compile and run as shown earlier.

## js-beautify

The file is called .jsbeautifyrc. The first option shown below tells js-beautify to leave JSX alone, the second tells it to leave import statements alone when they contain inline curly braces:
import { ReactBasics } from '../ReactBasics.js';

```json
{
  "e4x": true,
  "brace_style": "collapse-preserve-inline"
}
```

## Turn it in

Git add, commit and push your work. Create a branch called **ReactBasics**:

```
git branch ReactBasics
```

Create a tag:

```
  git tag -a v1.0.1 -m "React Basics turned in."
  git push origin v1.0.1
```

Use a numbering system that makes sense in the context of your repository. For instance, if you already have v1.0.1 then use v1.0.2 or whatever is appropriate and so on. Use your common sense.


## Arrow Functions

Set "parser": "babel-eslint" in .eslintrc to allow arrow functions.
