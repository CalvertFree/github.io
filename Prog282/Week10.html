<!DOCTYPE html>
<html dir="ltr">

<head>
	<meta charset="utf-8" />
	<title>Week10</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/charlie/images/favicon.png">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">
	<link href="/charlie/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css" />
	<!-- Latest compiled and minified JavaScript - Move to bottom of body element -->
	<script src="//code.jquery.com/jquery.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="/charlie/libs/scripts/elvenware.js" type="text/javascript"></script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-2806409-2']);
		_gaq.push(['_trackPageview']);
		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</head>

<body>



	<!-- removed  navbar-fixed-top -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
				</button>
				<a class="navbar-brand" href="/charlie/index.html">Elvenware</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="/charlie/index.html">Home</a></li>
					<li><a href="/charlie/contents.html">About</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li class="dropdown-header">Core Code</li>
							<li><a href="/charlie/development/index.html">Strongly Typed</a></li>
							<li><a href="/charlie/development/web/index.html">Web &amp; Scripts</a></li>
							<li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">OS and Tools</li>
							<li><a href="/charlie/os/index.html">OS</a></li>
							<li><a href="/charlie/development/database/index.html">Database</a></li>
							<li><a href="/charlie/books/index.html">My Writing</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Art</li>
							<li><a href="/charlie/Art/index.html">Poems &amp; Photos</a></li>
							<li><a href="/charlie/books/reading/index.html">Book Reviews</a></li>
							<li><a href="/charlie/spirit/index.html">Spiritual</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Links</li>
							<li><a href="/charlie/links.html">My Links</a></li>
							<li><a href="http://www.github.com/charliecalvert">GitHub</a></li>
							<li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li>
						</ul>
					</li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">

		<div class="starter-template">
			<figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png" /></figure>
<h2>Table of Contents</h2>
<ul>
	<li><a href='#week-10'>Week 10</a></li>
	<li><a href='#class-overview'>Class Overview</a></li>
	<li><a href='#sessions'>Sessions</a></li>
	<li><a href='#users'>Users</a></li>
	<li><a href='#cookies'>Cookies</a></li>
	<li><a href='#get-command-line-arguments-in-node'>Get Command Line Arguments in Node</a></li>
	<li><a href='#express-from-scratch'>Express from Scratch</a></li>
	<li><a href='#express-and-jade'>Express and Jade</a></li>
	<li><a href='#turn-off-the-bell-in-linux'>Turn off the Bell in Linux</a></li>
</ul>
<h1 id="week-10">Week 10</h1>
<p>I believe We have four classes left, 6/4, 6/9, 6/12, 6/16.</p>
<p>Main Topics discussed this week include:</p>
<ul>
<li>Sessions: npm install express-session</li>
<li>Nodemon: npm install -g nodemon</li>
<li>Refactoring</li>
<li>Integrate Markdown</li>
<li>Observer: PubSub</li>
</ul>
<h1 id="class-overview">Class Overview</h1>
<p>Things you've learned these last two quarters in 280 and 282:</p>
<p>Technolgies:</p>
<pre><code>MongoDb
MongoLab
Aws EC2 and S3
SSH
JSON
Web Servers
Ports and IP Addresses
Linux command line
Eclipse
Geany
Node
Express
Jade
Require
jQuery
Karma
Grunt</code></pre>
<p>JavaScript:</p>
<pre><code>Callbacks
JavaScript Objects and Arrays
Constructor Functions
Prototypal Inheritance
Unit testing and Jasmine
Async Programming and Testing
Express Routes
Rest and Ajax
JsHint</code></pre>
<p>Patterns:</p>
<pre><code>Singleton
Factory
Bridge
Observer (PubSub)
Modular
Queue
Stack</code></pre>
<p>Tools:</p>
<pre><code>Git and GitGui
Debugging with the Chrome Developer Tools
Cloud9
Google Drive
Evernote
Microsoft OneDrive</code></pre>
<h2 id="sessions">Sessions</h2>
<p>Sessions have the following traits:</p>
<p>When we create session, a cookie is built in, it is part of the session. Each cookie is maintained by the browser and has an id. Each request from the browser contains the cookie and its ID. The server can use this ID to associate data that it (the server) maintains with the cookie, that is with the session associated with a particular browser.</p>
<p>The best way to learn more about sessions is to run and study the following two demos:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/NodeCode/Session01">JsObjects/JavaScript/NodeCode/Session01</a></li>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/NodeCode/Session02">JsObjects/JavaScript/NodeCode/Session02</a></li>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/NodeCode/Session03">JsObjects/JavaScript/NodeCode/Session03</a></li>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/NodeCode/Session04">JsObjects/JavaScript/NodeCode/Session04</a></li>
</ul>
<h2 id="users">Users</h2>
<p>When you sign in as a user, you can use the session object to track each individual user. You can use a database like redis or dbcouch to store user's progress.</p>
<p>See NodeCode/Session03 or NodeCode/Session04 to see working examples of the code discussed in this section.</p>
<p>Be sure to include the session code from Express:</p>
<pre><code>  app.use(express.cookieParser(&#39;your secret here&#39;));
  app.use(express.session());</code></pre>
<p>The addUser method responds to a click on a button. It retrieves the <strong>userName</strong> that the user typed in to our client side HTML.</p>
<pre><code>app.post(&#39;/addUser&#39;, function(req, res) {
    console.log(&#39;/addUser called.&#39;)
    console.log(req.body);
    req.session.userName = req.body.userName;
    res.send({&#39;Result&#39;: JSON.stringify(req.session)});
});</code></pre>
<p>When you call up a particular page, the program first tracks the page you selected in the session object, and then uses handlebars to display an HTML file designed to mirror back information about your session. The handlebars code is encapsulated in an object called SessionHelper:</p>
<pre><code>sessionHelp = require(&#39;./Library/SessionHelper&#39;)</code></pre>
<p>We pass in the request object to the SessionHelper, and it uses that object to retrieve the data that we need to help us track an individual session, or an individual user:</p>
<pre><code>    var mainFile = readHtml(&#39;./Templates/SessionInfo.html&#39;);

    var template = handlebars.compile(mainFile);

    var result = template({
        pageName: &#39;2&#39;,
        userName: request.session.userName,
        previousPage: request.session.lastPage,
        cookieId : request.id,
        sessionId: request.sessionID      
    });</code></pre>
<h2 id="cookies">Cookies</h2>
<p>A cookie is small file stored on the client side by the browser containing information sent from the server. The usual purpose of a cookie is to enable a site to store information about a user. This information can:</p>
<ul>
<li>Help authenticate a user</li>
<li>Track information throughout a session that is associated with a user.</li>
<li>Help personalize a web site</li>
<li>Track the sites visited by a user</li>
</ul>
<p>Cookies contain a maximum of:</p>
<ul>
<li>255 characters</li>
<li>4K of disk space</li>
</ul>
<p>All cookies must have:</p>
<ul>
<li>A name</li>
<li>And a value</li>
</ul>
<p>They can also have:</p>
<ul>
<li>A path</li>
<li>An expiration date</li>
<li>A domain name</li>
<li>A connection type</li>
</ul>
<p>If you are at a site, and want to know what cookies it is tracking, paste the following into address bar:</p>
<p>JavaScript:alert(document.cookie);</p>
<h2 id="get-command-line-arguments-in-node">Get Command Line Arguments in Node</h2>
<p>Command line arguments are kept in an array called argv:</p>
<pre><code>process.argv</code></pre>
<p>Suppose you run the following:</p>
<pre><code>node server.js bar</code></pre>
<p>Bar will be process.argv[2]</p>
<h2 id="express-from-scratch">Express from Scratch</h2>
<p>Here is the command to create an express application from scratch:</p>
<pre><code>express --sessions --css stylus myapp</code></pre>
<h2 id="express-and-jade">Express and Jade</h2>
<p>Take a look at new demo:</p>
<p>JsObjects/JavaScript/NodeCode/ExpressLink</p>
<p>One of the things you need to watch out for is that you don't name two HTML files with the same name. If you Jade template is called index.jade, then don't put a static file called index.html in public. Instead, call it something else like Main.html or Game.html.</p>
<p>Remeber to put your route in app.js and routes/index.js. Here is app.js:</p>
<pre><code>app.get(&#39;/page02&#39;, routes.page02);</code></pre>
<p>And here is routes/index.js:</p>
<pre><code>exports.index = function(req, res){
  res.render(&#39;index&#39;, { title: &#39;Express&#39; });
};

exports.page02 = function(req, res){
  res.render(&#39;page02&#39;, { title: &#39;Page02&#39; });
};</code></pre>
<p>And here is layout.jade:</p>
<pre><code>doctype 5
html
    head
    title= title
    link(rel=&#39;stylesheet&#39;, href=&#39;/stylesheets/style.css&#39;)

    nav
        ul
            li
                a(href=&#39;/&#39;) Home
            li
                a(href=&#39;/page02&#39;) Page02
            li
                a(href=&#39;/main.html&#39;) Main

body
    block content</code></pre>
<h2 id="turn-off-the-bell-in-linux">Turn off the Bell in Linux</h2>
<p>Linux terminals can sometimes emit an annoying beep which can lead to familial discord. To fix it, edit or a create a file .inputrc in your home directory. Add the following line to the file:</p>
<pre><code>set bell-style visible</code></pre>
<p>Now your terminal will blink, rather than beep. One imagines that there must be a <strong>set bell-style none</strong> command as well, but I have not tried it.</p>
<ul>
<li><a href="http://superuser.com/questions/15770/what-is-the-best-way-to-turn-off-the-ubuntu-beep-permanently/15779#15779">http://superuser.com/questions/15770/what-is-the-best-way-to-turn-off-the-ubuntu-beep-permanently/15779#15779</a></li>
<li><a href="http://www.tldp.org/HOWTO/Visual-Bell-8.html">http://www.tldp.org/HOWTO/Visual-Bell-8.html</a></li>
</ul>
<!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>        
		<p>Copyright &copy; <a href="/charlie/index.html">Charlie Calvert</a> |
		<a href="/charlie/contents.html">Site Overview</a> |
		<a href="/charlie/development/index.html">Writing Code</a> |
		<a href="/charlie/development/web/index.html">Web</a> |
		<a href="/charlie/development/web/JavaScript/index.html">JavaScript</a> |
		<a href="/charlie/books/index.html">My Books</a> </p>

      </footer>

    </div><!-- /.container -->
</body>
</html>



