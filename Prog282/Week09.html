<!DOCTYPE html>
<html dir="ltr">

<head>
	<meta charset="utf-8" />
	<title>Week09</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/charlie/images/favicon.png">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">
	<link href="/charlie/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css" />
	<!-- Latest compiled and minified JavaScript - Move to bottom of body element -->
	<script src="//code.jquery.com/jquery.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="/charlie/libs/scripts/elvenware.js" type="text/javascript"></script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-2806409-2']);
		_gaq.push(['_trackPageview']);
		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</head>

<body>



	<!-- removed  navbar-fixed-top -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
				</button>
				<a class="navbar-brand" href="/charlie/index.html">Elvenware</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="/charlie/index.html">Home</a></li>
					<li><a href="/charlie/contents.html">About</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li class="dropdown-header">Core Code</li>
							<li><a href="/charlie/development/index.html">Strongly Typed</a></li>
							<li><a href="/charlie/development/web/index.html">Web &amp; Scripts</a></li>
							<li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">OS and Tools</li>
							<li><a href="/charlie/os/index.html">OS</a></li>
							<li><a href="/charlie/development/database/index.html">Database</a></li>
							<li><a href="/charlie/books/index.html">My Writing</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Art</li>
							<li><a href="/charlie/Art/index.html">Poems &amp; Photos</a></li>
							<li><a href="/charlie/books/reading/index.html">Book Reviews</a></li>
							<li><a href="/charlie/spirit/index.html">Spiritual</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Links</li>
							<li><a href="/charlie/links.html">My Links</a></li>
							<li><a href="http://www.github.com/charliecalvert">GitHub</a></li>
							<li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li>
						</ul>
					</li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">

		<div class="starter-template">
			<figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png" /></figure>
<h2>Table of Contents</h2>
<ul>
	<li><a href='#week09-overview'>Week09 Overview</a></li>
	<li><a href='#nodemon-watches-for-changes'>Nodemon Watches for Changes</a></li>
	<li><a href='#phantomjs-and-qunit'>PhantomJs and QUnit</a></li>
	<li><a href='#create-database'>Create Database</a></li>
	<li><a href='#express-complete-build'>Express Complete Build</a></li>
	<li><a href='#initializing-buttons-on-dynamically-inserted-html'>Initializing Buttons on Dynamically Inserted HTML</a></li>
</ul>
<h1 id="week09-overview">Week09 Overview</h1>
<p>Our major topic:</p>
<ul>
<li>AWS and EC2
<ul>
<li><a href="http://bit.ly/Rzi2Da">AWS Deck: http://bit.ly/Rzi2Da</a></li>
<li><a href="http://www.elvenware.com/charlie/development/cloud/WebServices.html#aws">On Elvenware</a></li>
</ul></li>
<li>Singleton
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/Design/Singleton">On JsObjects</a></li>
</ul></li>
<li>Sessions</li>
<li>NoDemon</li>
<li><a href="http://bit.ly/Q9A4Ne">WebServers Review: http://bit.ly/Q9A4Ne</a></li>
</ul>
<p>The assignments:</p>
<ul>
<li><a href="http://www.elvenware.com/charlie/books/CloudNotes/Prog282/Week09-InClass.html">Week09-InClass</a></li>
<li><a href="http://www.elvenware.com/charlie/books/CloudNotes/Prog282/Week09-Assignment.html">Week09-Assignment</a></li>
</ul>
<h2 id="nodemon-watches-for-changes">Nodemon Watches for Changes</h2>
<p>Install nodemon:</p>
<pre><code>npm install -g nodemon</code></pre>
<p>Now use it to start your application:</p>
<pre><code>nodemon server.js</code></pre>
<p>Now you won't have to restart your application each time you change the source.</p>
<h2 id="phantomjs-and-qunit">PhantomJs and QUnit</h2>
<ul>
<li><a href="http://phantomjs.org/">PhantomJs site. Also see below.</a></li>
</ul>
<p>You can use PhantomJs to run tests on your program from the command line. This means that we can run QUnit tests from the command line:</p>
<pre><code>G:\Src&gt;phantomjs Tests\run-qunit.js http://localhost:30025/TestCanvasCode.html
&#39;waitFor()&#39; finished in 233ms.
Tests completed in 141 milliseconds.
44 assertions of 58 passed, 14 failed.</code></pre>
<p>Here is the home page for PhantomJs and a related tool called CasperJs:</p>
<ul>
<li><a href="http://phantomjs.org/">http://phantomjs.org/</a></li>
<li><a href="http://casperjs.org/">http://casperjs.org/</a></li>
</ul>
<p>References:</p>
<ul>
<li><a href="https://gist.github.com/gmarik/1305062">https://gist.github.com/gmarik/1305062</a></li>
</ul>
<h2 id="create-database">Create Database</h2>
<p>Check if a database exists, if it does not, create it:</p>
<pre><code>    var makeDatabase = function(response, dbName) {
        nano.db.create(dbName, function(err, body) {
            if (!err) {
                console.log(body);
                // return { &quot;Result&quot; : &quot;Success&quot; };
            } else {
                console.log(&#39;Could not create database&#39;);
                console.log(err);
                response.send(500, err);
            }
        });
    };

    var dbExists = function(response, dbName) {
        nano.db.list(function(err, body) {
            var dbFound = false;
            // body is an array
            body.forEach(function(db) {
                console.log(db);
                if (db === dbName) {
                    console.log(&#39;database exists&#39;);
                    dbFound = true;
                }
            });
            
            // If dbName not found, create database         
            if (!dbFound) {
                makeDatabase(response, dbName);
            } else {
                response.send({&#39;Result&#39;:&#39;Database Exists&#39;})
            }
        });
    };</code></pre>
<p>Call it like this:</p>
<pre><code>dbExists(response, dbName);</code></pre>
<h2 id="express-complete-build">Express Complete Build</h2>
<p>Build an Express application:</p>
<pre><code>express --sessions --css stylus myapp</code></pre>
<p>Some links for express and a note or two.</p>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/NodeJs.html#express-generated-applications">Express Generated Apps on Elvenware</a></li>
<li><a href="http://blog.jtmoon.com/real-time-application-multi-user-chat-application-using-node-js-socket-io-and-ember-js/">Multi-user Chat</a></li>
<li><a href="http://tech.pro/tutorial/1097/simple-chat-nodejs-plus-websockets">Simple Chat</a></li>
</ul>
<p>Express application is here:</p>
<pre><code>C:\Users\Charlie\AppData\Roaming\npm\node_modules\.bin</code></pre>
<p>Of sometimes just in your ../node_modules/express/.bin directory</p>
<h2 id="initializing-buttons-on-dynamically-inserted-html">Initializing Buttons on Dynamically Inserted HTML</h2>
<p>If you load a HTML page in your game, then you sometimes need to initialize the buttons that you will use on that page. One way to do that is to link in a JavaScript page from the loaded HTML page, and load the buttons there. However, sometimes that is not practical. In that case, do something like this:</p>
<pre><code>    var htapp.get(&#39;/readJson&#39;, function(request, response) {
    console.log(&#39;readJson called: &#39; + request.query)
    var prog = nano.db.use(dbName);
    
    prog.get(request.query.docName, function(error, existing) {
        if(!error) { 
            console.log(existing);
            response.send(existing);
        }  else {
            console.log(error);
            response.send(500, error);
        }
    });
    console.log(&#39;Exiting Get readJson&#39;);
});mlView = function() {
        $(&#39;#main&#39;).empty();
        $(&#39;#main&#39;).load(&quot;/Data/newSections.html #barFoo&quot;,
            function() {
                // Init the button here
                $(&quot;#buttonCreateArray&quot;).click(allGridFilesToArray);
                // Alternatively, call some method where you init the buttons
                that.elvenData.setUpCouchDbUtils();
            }
        );
    }</code></pre>
<!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>        
		<p>Copyright &copy; <a href="/charlie/index.html">Charlie Calvert</a> |
		<a href="/charlie/contents.html">Site Overview</a> |
		<a href="/charlie/development/index.html">Writing Code</a> |
		<a href="/charlie/development/web/index.html">Web</a> |
		<a href="/charlie/development/web/JavaScript/index.html">JavaScript</a> |
		<a href="/charlie/books/index.html">My Books</a> </p>

      </footer>

    </div><!-- /.container -->
</body>
</html>



