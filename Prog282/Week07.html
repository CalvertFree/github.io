<!DOCTYPE html>
<html dir="ltr">

<head>
	<meta charset="utf-8" />
	<title>Week07</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/charlie/images/favicon.png">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">
	<link href="/charlie/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css" />
	<!-- Latest compiled and minified JavaScript - Move to bottom of body element -->
	<script src="//code.jquery.com/jquery.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="/charlie/libs/scripts/elvenware.js" type="text/javascript"></script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-2806409-2']);
		_gaq.push(['_trackPageview']);
		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</head>

<body>



	<!-- removed  navbar-fixed-top -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
				</button>
				<a class="navbar-brand" href="/charlie/index.html">Elvenware</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="/charlie/index.html">Home</a></li>
					<li><a href="/charlie/contents.html">About</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li class="dropdown-header">Core Code</li>
							<li><a href="/charlie/development/index.html">Strongly Typed</a></li>
							<li><a href="/charlie/development/web/index.html">Web &amp; Scripts</a></li>
							<li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">OS and Tools</li>
							<li><a href="/charlie/os/index.html">OS</a></li>
							<li><a href="/charlie/development/database/index.html">Database</a></li>
							<li><a href="/charlie/books/index.html">My Writing</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Art</li>
							<li><a href="/charlie/Art/index.html">Poems &amp; Photos</a></li>
							<li><a href="/charlie/books/reading/index.html">Book Reviews</a></li>
							<li><a href="/charlie/spirit/index.html">Spiritual</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Links</li>
							<li><a href="/charlie/links.html">My Links</a></li>
							<li><a href="http://www.github.com/charliecalvert">GitHub</a></li>
							<li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li>
						</ul>
					</li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">

		<div class="starter-template">
			<figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png" /></figure>
<h2>Table of Contents</h2>
<ul>
	<li><a href='#week07'>Week07</a></li>
	<li><a href='#routes'>Routes</a></li>
	<li><a href='#merging-git-files'>Merging Git Files:</a></li>
	<li><a href='#the-same-origin-policy'>The Same Origin Policy</a></li>
	<li><a href='#free-graphics'>Free Graphics</a></li>
	<li><a href='#folder-manipulation'>Folder Manipulation</a></li>
	<li><a href='#angular-js'>Angular JS</a></li>
</ul>
<h1 id="week07">Week07</h1>
<ul>
<li><a href="http://bit.ly/noderoutes">Routes and Query Strings: http://bit.ly/noderoutes</a></li>
<li>ACA Bridge Analogy</li>
<li>Working with baseURL in require.config (See BridgeReader in writing...)</li>
<li><a href="http://www.elvenware.com/charlie/books/CloudNotes/Assignments/Prog282Midterm2014.html">Midterm</a></li>
</ul>
<p>I'll pass out the midterm this week. It will be due Sunday night. It will be open book, but will probably be fairly time consuming, so you might begin planning for that contingency. One thing is certain, if you start it on Sunday evening, you probably won't do very well.</p>
<h2 id="routes">Routes</h2>
<pre><code>router.get(&#39;/read&#39;, function(request, response) {
    var queryObject = request.query;
    var queryAsString = JSON.stringify(request.query);
    console.log(&quot;Read called: &quot; + queryAsString);
    response.send({ &quot;firstName&quot;: queryObject.firstName });
});</code></pre>
<h2 id="merging-git-files">Merging Git Files:</h2>
<ul>
<li><a href="http://elvenware.com/charlie/development/cloud/Git.html#merging-code">http://elvenware.com/charlie/development/cloud/Git.html#merging-code</a></li>
</ul>
<h2 id="the-same-origin-policy">The Same Origin Policy</h2>
<p>Let's talk a bit more about jsonp, since this is not a subject we have discussed in depth so far.</p>
<p>After you install CouchDb, you can open up their ﻿<strong>Futon</strong> ﻿web app:</p>
<p><a href="http://localhost:5984/_utils/">http://localhost:5984/_utils/</a></p>
<p>On the upper right hand side of <strong>﻿Futon</strong>﻿ is a link to the configuration page:</p>
<p><a href="http://localhost:5984/_utils/config.html">http://localhost:5984/_utils/config.html</a></p>
<p>About 40 items down in the <strong>﻿options</strong>﻿ column of the configuration page is a setting that allows you to turn on <strong>jsonp</strong>. You should double click the word <strong>﻿false</strong>﻿ and set it to <strong>﻿true</strong>﻿.</p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Same_origin_policy">http://en.wikipedia.org/wiki/Same_origin_policy</a></li>
<li><a href="http://en.wikipedia.org/wiki/JSONP">http://en.wikipedia.org/wiki/JSONP</a></li>
</ul>
<p>Our browsers are set up to refuse to make requests that are not sent to the web server that served up a particular page. If you are using http://localhost:30025 as your web server, then you can only send requests to http://localhost:30025. If you try, for instance, to post data by making an ajax call to http://www.google.com, then that request will be refused. This is an important security feature. If, for instance, you are connected to your bank, and some hackers intercepts one of your calls (perhaps the one where you submit your password) and tries to direct it to another site, then that request will be refused by the browser because of the Same Origin Policy.</p>
<p><strong>jsonp</strong> is a way around this restriction. As a rule, I think jsonp is a very bad idea. But for now, I want to turn it on.</p>
<p>The last example I showed in class on Wednesday used CouchApp to serve up an application. This is important because it allows us to send couchdb rest commands directly back to the server that served up our pages, without having to use <strong>jsonp</strong>. The technique I showed where we used our server side code in express to make the couchdb calls, also works around the cross domain/same origin policy in a reasonable way. In particular, applications running on a server are not subject to the cross domain policy. So our client can ask the node express server to call couchdb, which is a completely appropriate thing to do. If we don't trust the code running on the server, then we should not be using the service at all!</p>
<p>One way to get around the same origin policy (cross site restriction), is to build a CouchDb hosted application with CouchApp.</p>
<ul>
<li>Get CouchAppAuto from JsObjects/Data.</li>
<li>Change the first editable line (the AppName) in the go batch file.</li>
<li>Run the batch file</li>
<li>Go into the directory it created, which is the same as your AppName</li>
<li>Put your HTML and CSS in the **_attachments** directory. For instance, put a file called index.html there. Then run this command: <strong>couchapp push couchapps</strong>. This command tells CouchApp to push your newly constructed app to the couchdb called couchapp. The go.bat file set up couchapp for you.</li>
<li>Go something like here: http://127.0.0.1:5984/couchapp/_design/CouchApp06/index.html. The key point here is that CouchApp06 should be your AppName, and index.html should be the name of the file you put in the **_attachments** directory.</li>
</ul>
<h2 id="free-graphics">Free Graphics</h2>
<ul>
<li><a href="http://opengameart.org/">http://opengameart.org/</a></li>
<li><a href="http://www.lostgarden.com/2006/07/more-free-game-graphics.html">http://www.lostgarden.com/2006/07/more-free-game-graphics.html</a></li>
<li><a href="http://gamedev.stackexchange.com/questions/20/where-can-i-find-free-sprites-and-images">http://gamedev.stackexchange.com/questions/20/where-can-i-find-free-sprites-and-images</a></li>
<li><a href="http://www.cgtextures.com/">http://www.cgtextures.com/</a></li>
</ul>
<h2 id="folder-manipulation">Folder Manipulation</h2>
<p>A library with a routine for ensuring a directory exists and for recursively removing directories.</p>
<pre><code>var mkdirp = require(&#39;mkdirp&#39;);
var fs = require(&#39;fs&#39;);
var path = require(&quot;path&quot;);

var SimpleDir = (function() {

    function SimpleDir() {
    }
    
    var makeDir = function(folder) {
        mkdirp(folder);
    }
    
    // Test if a directory exists, if it does not exist create it
    SimpleDir.prototype.ensureDir = function(folder) {
        fs.exists(folder, existsFunc);
    }
    
    // Synchronous version of directory exists
    SimpleDir.prototype.ensureDirSync = function(folder) {
        currentFolder = folder;
        if (fs.existsSync(folder)) {
            return fs.statSync(folder);
        } else {
            makeDir(folder);
            return &#39;successfully created directory&#39;;
        }       
    };

    // Remove directories recursively
    // Credit to tkihira: https://gist.github.com/tkihira/2367067
    SimpleDir.prototype.rmdirSync = function(dir) {
        var list = fs.readdirSync(dir);
        for(var i = 0; i &lt; list.length; i++) {
            var filename = path.join(dir, list[i]);
            var stat = fs.statSync(filename);
            
            if(filename == &quot;.&quot; || filename == &quot;..&quot;) {
                // pass these files
            } else if(stat.isDirectory()) {
                // rmdir recursively
                this.rmdirSync(filename);
            } else {
                // rm filename
                fs.unlinkSync(filename);
            }
        }
        fs.rmdirSync(dir);
    };
        
    return SimpleDir;
})();

exports.dirs = new SimpleDir();</code></pre>
<h2 id="angular-js">Angular JS</h2>
<p><a href="http://stephanebegaudeau.tumblr.com/post/48776908163/everything-you-need-to-understand-to-start-with">http://stephanebegaudeau.tumblr.com/post/48776908163/everything-you-need-to-understand-to-start-with</a> <a href="http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/all-you-need-to-know-about-the-html5-data-attribute/">http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/all-you-need-to-know-about-the-html5-data-attribute/</a></p>
<!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>        
		<p>Copyright &copy; <a href="/charlie/index.html">Charlie Calvert</a> |
		<a href="/charlie/contents.html">Site Overview</a> |
		<a href="/charlie/development/index.html">Writing Code</a> |
		<a href="/charlie/development/web/index.html">Web</a> |
		<a href="/charlie/development/web/JavaScript/index.html">JavaScript</a> |
		<a href="/charlie/books/index.html">My Books</a> </p>

      </footer>

    </div><!-- /.container -->
</body>
</html>



