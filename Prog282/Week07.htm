<h1 id="week07">Week07</h1>
<h1 id="main-topics">Main Topics</h1>
<ul>
<li>Databases - CouchDb</li>
<li>VirtualBox</li>
<li>Two Grids (Background and NPCs - GridCanvas04</li>
<li>Finding an NPC</li>
</ul>
<p>Key Demos:</p>
<p>There are mostly in JsObjects. Look especially at:</p>
<ul>
<li>CouchDb08: This one is crucial.</li>
<li>CouchApp06: Look in the _attachments directory</li>
<li>CouchDb03: Using the <strong>request</strong> library</li>
<li>CouchDb04: Using the <strong>nano</strong> library</li>
<li>CouchDb05: This is a <strong>hello world</strong> of sorts for couchdb</li>
</ul>
<h2 id="collisions">Collisions</h2>
<p>Here is one way to detect a collision with an NPC. It assumes that npcs is a two dimensional array containing 0 for no NPC and any other number is an NPC.</p>
<pre><code>    var detectCollision = function(playerX, playerY) {
        var npcNumber = npcs[playerY][playerX];
        if (npcNumber !== 0) {
            $(&quot;#npc&quot;).html(&quot;Found an npc with number: &quot; + npcNumber);
        }
    }</code></pre>
<h2 id="virtualbox">VirtualBox</h2>
<p>The minimal cd, let's use the 32 bit 13.04 ringtail option.</p>
<p><a href="https://help.ubuntu.com/community/Installation/MinimalCD">https://help.ubuntu.com/community/Installation/MinimalCD</a> <a href="http://archive.ubuntu.com/ubuntu/dists/raring/main/installer-i386/current/images/netboot/mini.iso">http://archive.ubuntu.com/ubuntu/dists/raring/main/installer-i386/current/images/netboot/mini.iso</a> <a href="http://elvenware.com/charlie/os/linux/VirtualBox.html">http://elvenware.com/charlie/os/linux/VirtualBox.html</a> <a href="http://elvenware.com/charlie/os/linux/VirtualBox.html#minimal">http://elvenware.com/charlie/os/linux/VirtualBox.html#minimal</a></p>
<p>When doing the install, you can follow the steps for minimal install, linked above. Some quick reminders if you just need a few hints:</p>
<ul>
<li>At 1048 MB of Memory (2048 preferred)</li>
<li>Create virtual hard drive now</li>
<li>VDI, Dynamically allocated, 8 GB if you are short on disk space, else 16 GB.</li>
<li>Settings | Storage | Add CD</li>
<li>Network Bridged Adapter PCNet Fast III (If you are at school, see notes)</li>
</ul>
<p>During the install:</p>
<ul>
<li>Guided, use entire disk.</li>
<li>Just install Ubuntu Server and SSH Server.</li>
<li>If you create other installs, then create an Ubuntu Desktop or Lubuntu desktop.</li>
</ul>
<p>As soon as you have the puppy properly installed, then immediately make a VirtualBox appliance as a back up. Make more applianaces as needed, and name them carefully.</p>
<p>I have generally found that it is not worth the effort to try to get two copies of the same virtual appliance running at the same time. (Let me know if you find a clean way to do this.)</p>
<p>My suggestion is that you do a VBox Ubuntu install, make an appliance as a back up, and get to work. Then some Saturday afternoon when nothing much is happening, create a few more VBox Ubuntu installs. It might be nice to have four or five of them around, assuming you have the hard drive space. Name them carefully. <a href="http://www.elvenware.com/charlie/development/cloud/virtualization.html">http://www.elvenware.com/charlie/development/cloud/virtualization.html</a></p>
<h2 id="databases">Databases</h2>
<h2 id="couchdb">CouchDb</h2>
<p>There is a Windows install. For the Linux install:</p>
<p>sudo apt-get install couchdb -y</p>
<p>For windows:</p>
<p><a href="http://apache.mirrors.pair.com/couchdb/binary/win/1.3.0/setup-couchdb-1.3.0_R15B03-1.exe">http://apache.mirrors.pair.com/couchdb/binary/win/1.3.0/setup-couchdb-1.3.0_R15B03-1.exe</a></p>
<p><a href="http://couchdb.apache.org/">http://couchdb.apache.org/</a> <a href="http://wiki.apache.org/couchdb/">http://wiki.apache.org/couchdb/</a> <a href="http://wiki.apache.org/couchdb/Installing_on_Ubuntu">http://wiki.apache.org/couchdb/Installing_on_Ubuntu</a> <a href="http://guide.couchdb.org/editions/1/en/index.html">http://guide.couchdb.org/editions/1/en/index.html</a></p>
<p>We will access the database via HTTP and use request:</p>
<p><a href="https://github.com/mikeal/request">https://github.com/mikeal/request</a></p>
<p>Getting started:</p>
<p><a href="http://guide.couchdb.org/draft/tour.html">http://guide.couchdb.org/draft/tour.html</a></p>
<p>Once you have it installed on Windows, use the browser:</p>
<ul>
<li><a href="http://127.0.0.1:5984/">http://127.0.0.1:5984/</a></li>
<li><a href="http://localhost:5984/_utils/">futon</a></li>
</ul>
<p>We want to go to config.html, which is reachable from futon, and set allow_jsonp to true. It is in the http section, about half way down the page:</p>
<p><a href="http://localhost:5984/_utils/config.html">http://localhost:5984/_utils/config.html</a></p>
<p>One way to get around the same origin policy (cross site restriction), is to build a CouchDb hosted application with CouchApp.</p>
<ul>
<li>Get CouchAppAuto from JsObjects/Data.</li>
<li>Change the first editable line (the AppName) in the go batch file.</li>
<li>Run the batch file</li>
<li>Go into the directory it created, which is the same as your AppName</li>
<li>Put your HTML and CSS in the _attachments directory</li>
<li>Go something like here: http://127.0.0.1:5984/couchapp04/_design/CouchApp06/index.html</li>
</ul>
<h2 id="couchapps">CouchApps</h2>
<ul>
<li><a href="http://couchapp.org/page/index">http://couchapp.org/page/index</a></li>
<li><a href="http://couchapp.org/page/getting-started">http://couchapp.org/page/getting-started</a></li>
<li><a href="http://garden20.com/">http://garden20.com/</a></li>
</ul>
<p>To Install CouchApp for use With Node</p>
<p>npm install -g couchapp</p>
<p>To install couchapp without Node:</p>
<ul>
<li><a href="http://sourceforge.net/projects/pywin32/">http://sourceforge.net/projects/pywin32/</a></li>
</ul>
<p>When you are done, make sure couchapp.bat or couchapp.exe is on your path. If you installed via Python (rather than the totally stand alone option), this might mean you do add something like this to your path</p>
<pre><code>c:\Python27\Scripts</code></pre>
<p>It will be the scripts directory that holds you couchapp.bat file.</p>
<h2 id="sqllite">SqlLite</h2>
<p>We probably won't be using SqlLite.</p>
<p>When downloading for Windows, look for the <strong>Precompiled Binaries</strong> and look for the command line shell.</p>
<ul>
<li><a href="http://www.sqlite.org/">http://www.sqlite.org/</a></li>
<li><a href="http://www.sqlite.org/download.html">http://www.sqlite.org/download.html</a></li>
<li><a href="http://www.sqlite.org/datatype3.html">http://www.sqlite.org/datatype3.html</a></li>
</ul>
<pre><code>apt-get install sqlite3
apt-get install libsqlite3-dev
npm install sqlite3</code></pre>
<p>CREATE TABLE people( varchar(30) primary key, firstName text, lastName text, age integer );</p>
<h2 id="free-graphics">Free Graphics</h2>
<ul>
<li><a href="http://opengameart.org/">http://opengameart.org/</a></li>
<li><a href="http://www.lostgarden.com/2006/07/more-free-game-graphics.html">http://www.lostgarden.com/2006/07/more-free-game-graphics.html</a></li>
<li><a href="http://gamedev.stackexchange.com/questions/20/where-can-i-find-free-sprites-and-images">http://gamedev.stackexchange.com/questions/20/where-can-i-find-free-sprites-and-images</a></li>
<li><a href="http://www.cgtextures.com/">http://www.cgtextures.com/</a></li>
</ul>
<h2 id="angular-js">Angular JS</h2>
<h2 id="folder-manipulation">Folder Manipulation</h2>
<p>A library with a routine for ensuring a directory exists and for recursively removing directories.</p>
<pre><code>var mkdirp = require(&#39;mkdirp&#39;);
var fs = require(&#39;fs&#39;);
var path = require(&quot;path&quot;);

var SimpleDir = (function() {

    function SimpleDir() {
    }
    
    var makeDir = function(folder) {
        mkdirp(folder);
    }
    
    // Test if a directory exists, if it does not exist create it
    SimpleDir.prototype.ensureDir = function(folder) {
        fs.exists(folder, existsFunc);
    }
    
    // Synchronous version of directory exists
    SimpleDir.prototype.ensureDirSync = function(folder) {
        currentFolder = folder;
        if (fs.existsSync(folder)) {
            return fs.statSync(folder);
        } else {
            makeDir(folder);
            return &#39;successfully created directory&#39;;
        }       
    };

    // Remove directories recursively
    // Credit to tkihira: https://gist.github.com/tkihira/2367067
    SimpleDir.prototype.rmdirSync = function(dir) {
        var list = fs.readdirSync(dir);
        for(var i = 0; i &lt; list.length; i++) {
            var filename = path.join(dir, list[i]);
            var stat = fs.statSync(filename);
            
            if(filename == &quot;.&quot; || filename == &quot;..&quot;) {
                // pass these files
            } else if(stat.isDirectory()) {
                // rmdir recursively
                this.rmdirSync(filename);
            } else {
                // rm filename
                fs.unlinkSync(filename);
            }
        }
        fs.rmdirSync(dir);
    };
        
    return SimpleDir;
})();

exports.dirs = new SimpleDir();</code></pre>
<h2 id="angular-js-1">Angular JS</h2>
<p><a href="http://stephanebegaudeau.tumblr.com/post/48776908163/everything-you-need-to-understand-to-start-with">http://stephanebegaudeau.tumblr.com/post/48776908163/everything-you-need-to-understand-to-start-with</a> <a href="http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/all-you-need-to-know-about-the-html5-data-attribute/">http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/all-you-need-to-know-about-the-html5-data-attribute/</a></p>
